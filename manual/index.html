<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>マニュアル</title>
    <link rel="stylesheet" href="../styles/bundle.css" />
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <div class="sticky-header">
      <div
        class="flex flex-col gap-1"
        style="width: 500px; max-width: 100%; margin: 0 auto; padding: 8px 12px"
      >
        <div class="flex justify-between items-center">
          <!-- オペレーター名 -->
          <div class="flex flex-col">
            <!-- <label for="operator-name-input" class="text-sm"
              >オペレーター名:</label
            > -->
            <input
              type="text"
              style="width: 120px"
              id="operator-name-input"
              class="small-placeholder"
              placeholder="オペレーター名"
            />
          </div>

          <a id="help-link" href="./help.html" class="text-sm" target="_blank"
            >使い方（管理者用）</a
          >

          <!-- 設定 -->
          <button
            class="btn"
            style="
              border: none;
              font-weight: normal;
              color: var(--muted-foreground);
            "
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseExample"
            aria-expanded="false"
            aria-controls="collapseExample"
          >
            設定
          </button>

          <!-- <button
            id="settings-toggle"
            class="settings-icon-btn"
            aria-label="設定を開く"
            title="設定"
          >
            <img
              src="../components/ui/gear-fill.svg"
              alt="設定"
              width="16"
              height="16"
            />
          </button> -->
        </div>
        <!-- 設定パネル -->
        <div class="collapse" id="collapseExample">
          <div
            style="
              border-radius: 8px;
              border: 2px solid #aaa;
              padding: 12px;
              font-size: 0.9rem;
            "
          >
            <div
              style="
                display: flex;
                gap: 8px;
                align-items: center;
                margin-bottom: 0.5rem;
              "
            >
              <h2 style="font-size: 1rem; margin: 0">設定</h2>
            </div>
            <p style="color: var(--muted-foreground)">
              以下の設定の変更するには、config.js を編集してください。
            </p>
            <div>
              <label for="hinichi-input">"お日にちがかかる..." を上書き:</label>
              <input
                type="text"
                style="width: 200px"
                data-target-classes="delay-notice delay-notice-for-taishogai"
                id="delay-notice-input"
                data-priority="1"
                placeholder="お日にちがかかる可能性案内"
                disabled
              />
            </div>
            <div>
              <label for="hinichi-input">日時のフォーマット:</label>
              <input
                type="text"
                style="width: 200px"
                id="datetime-format-input"
                disabled
              />
            </div>
          </div>
        </div>

        <!-- Search UI -->
        <div class="relative">
          <input
            type="text"
            id="search-input"
            placeholder="検索"
            autocomplete="off"
            aria-label="ログ検索"
          />
          <button id="clear-btn" class="clear-btn" aria-label="検索をクリア">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18 6L6 18M6 6L18 18"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
        <!-- キーワード -->
        <!-- <div>
          <span class="text-sm" style="margin-right: 8px">頻出キーワード:</span>
          <button class="keyword-btn" data-keyword="浴室暖房乾燥機">
            浴室暖房乾燥機
          </button>
          <button
            class="keyword-btn"
            data-keyword="お客様がメーカーに直接修理依頼"
          >
            お客様がメーカーに直接修理依頼
          </button>
          <button class="keyword-btn" data-keyword="ユナイト非対応の照明">
            ユナイト非対応の照明
          </button>
        </div> -->

        <!-- Category Buttons -->
        <div class="flex gap-1 justify-center items-center">
          <span class="text-sm">カテゴリー:</span>
          <button class="tab-pill" data-target-category="inbound">受電</button>
          <button class="tab-pill" data-target-category="cb">CB</button>
          <button class="tab-pill" data-target-category="all">全て</button>
        </div>
        <!-- <div class="tabs-list" id="main-tabs" style="justify-content: center">
            <button class="tabs-trigger" data-tabs-value="inbound">受電</button>
            <button class="tabs-trigger" data-tabs-value="outbound">CB</button>
          </div> -->
      </div>
    </div>

    <div class="container bg-muted">
      <div
        id="result-count"
        style="color: var(--muted-foreground); font-size: 0.875rem"
        role="status"
        aria-live="polite"
      ></div>

      <div id="items-container" class="flex flex-col gap-3 mt-2">
        <div
          class="search-item card"
          data-title="有償警告"
          data-aliases="ゆうしょうけいこく"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <!-- <div class="card-title">有償警告</div> -->
          <!-- <label>
                <input
                  type="checkbox"
                  id="yusho-keikoku-checkbox"
                  data-target-class="yusho-keikoku"
                  data-true-value="済"
                  data-false-value="未"
                />
                済
              </label> -->
          <label id="is-mitsubishi-label">
            <input
              type="checkbox"
              id="is-mitsubishi-checkbox"
              data-target-class="delay-notice"
              data-true-value="通常よりお日にちがかかる可能性案内"
              data-priority="2"
            />
            三菱
          </label>

          <div style="display: flex; gap: 8px">
            <div class="copyable">
              ・有償警告案内<span class="yusho-keikoku">未</span><br />
              ・<span class="delay-notice">お日にちがかかる可能性案内</span
              ><span class="yusho-keikoku">未</span>
            </div>
            <div class="copyable">
              ・有償警告案内済<br />
              ・<span class="delay-notice">お日にちがかかる可能性案内</span
              ><span>済</span>
            </div>
          </div>

          <div style="display: flex; gap: 8px">
            <div class="copyable">
              ・メーカー保証期間内の有償警告案内<span class="yusho-keikoku"
                >未</span
              ><br />
              ・<span class="delay-notice">お日にちがかかる可能性案内</span
              ><span class="yusho-keikoku">未</span>
            </div>

            <div class="copyable">
              ・メーカー保証期間内の有償警告案内済<br />
              ・<span class="delay-notice">お日にちがかかる可能性案内</span
              ><span>済</span>
            </div>
          </div>
        </div>

        <div
          class="search-item card"
          data-title="保証対象外部位"
          data-aliases="ほしょうたいしょうがいぶい"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <!-- <div class="card-title">保証対象外部位</div> -->
          <div class="talk">
            今回の症状は、保証対象外のため、有償になります。費用については、メーカーに直接ご相談ください。
          </div>

          <hr />

          <div>
            <!-- <h3>備考</h3>
            <label style="margin-right: 12px">
              <input
                type="checkbox"
                id="taishogai-status-checkbox"
                data-target-class="taishogai-status"
                data-true-value="済"
                data-false-value="未"
              />
              済
            </label> -->
            <div style="display: flex; gap: 8px">
              <div class="copyable">
                ・保証対象外部位案内<span class="taishogai-status">未</span
                ><br />
                ・<span class="delay-notice-for-taishogai"></span
                ><span class="taishogai-status">未</span>
              </div>

              <div class="copyable">
                ・保証対象外部位案内<span class="taishogai-status">済</span
                ><br />
                ・<span class="delay-notice-for-taishogai"></span
                ><span class="taishogai-status">済</span>
              </div>
            </div>
          </div>

          <hr />

          <div>
            <h3 class="mb-1">伝達事項/申し送り事項</h3>
            <div class="copyable">
              対象外部位（■）と思われるため、修理のお取次ぎお願いします。
            </div>
          </div>
        </div>

        <div
          class="search-item card"
          data-title="留守番電話への吹き込み希望"
          data-aliases="留守電, るすでん, るすばんでんわ, ふきこみ"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <h3>伝達事項/申し送り事項</h3>
          <div class="copyable">
            不出の場合は、留守番電話に吹き込んでほしいとのご希望がございました。
          </div>
        </div>

        <div
          class="search-item card"
          data-title="浴室暖房乾燥機"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <!-- <div class="card-title">浴室暖房乾燥機</div> -->
          <h3>トーク(→販売店)</h3>
          <div class="talk">
            <p>
              先程、お客様から浴室暖房乾燥機の修理依頼のお電話が入りまして、その浴室暖房乾燥機が10年保証に入っているかの確認のために、お電話をさせていただきました。
            </p>
            <p>お客様情報をお伝えしてもよろしいでしょうか？</p>
          </div>
          <h3>備考</h3>
          <div class="copyable">
            店舗より、製品が10年保証に入っていることを確認済み。
          </div>
          <h3>その他</h3>
          <h4>型番の例</h4>
          <ul>
            <li>MAX UFD-111A</li>
            <li>TOTO TYB3111GAS 三乾王</li>
          </ul>
          <div class="hidden">よくだん, よくしつだんぼうかんそうき</div>
        </div>

        <div
          class="search-item card"
          data-title="お客様が直接メーカーに修理依頼をした"
          data-aliases="めーかー, ちょくせつ, しゅうりいらい"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <!-- <div class="card-title">お客様が直接メーカーに修理依頼をした</div> -->
          <h3>訪問前/訪問中</h3>
          <div class="talk">
            恐れ入りますが、当窓口を通していない修理は10年保証対象外でございます。
            お手数をおかけいたしますが、お客様が直接メーカーに依頼した修理は、お客様ご自身でキャンセルしていただきますようお願いいたします。
            そして、こちらのお電話で、10年保証対象の修理依頼を受け付けます。
          </div>
          <h4>備考:</h4>
          <div class="copyable">
            直接メーカーに依頼した修理をお客様ご自身でキャンセルしていただくよう案内。<br />
            当窓口で10年保証対象の修理依頼を承る。
          </div>
          <h3>訪問後</h3>
          <div class="talk">
            恐れ入りますが、当窓口を通していない修理は10年保証対象外でございます。
          </div>
        </div>

        <div
          class="search-item card"
          data-title="エアコンの修理依頼"
          data-aliases="えあこん"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <div class="talk">
            こちらの窓口はリフォーム製品の10年保証の窓口のため、ご購入店舗へお問い合わせください。
          </div>
          <h4>備考:</h4>
          <div class="copyable">購入店舗へ問い合わせていただくよう案内。</div>
        </div>

        <div
          class="search-item card"
          data-title="IHクッキングヒーター 天板にひび（割れ）"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <!-- <div class="card-title">IHクッキングヒーター 天板にひび（割れ）</div> -->
          <div>保証対象外部位</div>
        </div>

        <div
          class="search-item card"
          data-title="連絡希望時間/訪問希望日"
          data-aliases="れんらく, ほうもん"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <h3>申し送り事項</h3>
          <div class="copyable">連絡は■～■時、■時以降ご希望です。</div>
          <div class="copyable">訪問は■/■ご希望です。</div>
        </div>

        <div
          class="search-item card"
          data-title="販売店連携"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <h3>トーク (→お客様)</h3>
          <div class="talk">
            <p>
              今回の症状は、製品ではなく施工の問題の可能性もあるため、販売店と相談させていただきます。もし製品ではなく、施工の問題の可能性が高いと判断した場合は、販売店から連絡いたします。
            </p>
            <p>
              メーカーの修理になる可能性もあるため、10年保証の案内と、メーカーの修理の流れについて、ご案内させていただきます。
            </p>
            <p>[10年保証のトークスクリプト]</p>
          </div>

          <h3>トーク (→販売店)</h3>
          <div class="talk">
            先程、お客様から修理依頼のお電話をいただきまして、その故障の問題が施工と製品のどちらにあるのか、私共の窓口では判断できないため、ご相談させていただきたく、お電話いたしました。
          </div>
          <div></div>

          <div class="box flex flex-col gap-2">
            <div class="font-bold">メーカー修理の場合</div>

            <h3>備考</h3>
            <div class="copyable">
              <div>
                <span class="clock"></span> CC<span class="operator-name"
                  >■</span
                >
              </div>
              <div>対応者: ■店/■様/■</div>
              <div>メーカー修理をご希望。修理依頼を承る。</div>
            </div>

            <h3>申し送り事項</h3>
            <div class="copyable">
              販売店よりメーカー修理のご希望がございました。
            </div>
          </div>
          <div class="hidden">はんばいてんれんけい</div>
        </div>

        <div
          class="search-item card"
          data-title="販売店連携（メーカー修理不可）"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <div>給湯器（エコキュートなど）の外部配管/...</div>
          <h3>トーク (→お客様)</h3>
          <div class="talk">
            今回の症状は、製品ではなく施工の問題のため、販売店からご連絡いたします。
          </div>

          <h3>トーク (→販売店)</h3>
          <div class="talk">
            先程、お客様から■の修理依頼のお電話をいただきまして、故障の内容が施工のため、販売店様でご対応いただきたく、お電話いたしました。
          </div>
          <div></div>
          <div class="hidden">はんばいてんれんけい</div>
        </div>

        <div
          class="search-item card"
          data-title="ユナイト非対応の製品（照明など）"
          data-aliases="スワン, すわん, しょうめい, 照明, ゆないと"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <div>スワン、ｘｘ、ｘｘ、はユナイト非対応。家電119へ依頼。</div>
          <h3>トーク (→お客様)</h3>
          <div class="talk">
            担当部署（家電の119番）から折り返しご連絡いたします。
          </div>

          <h3>トーク (→家電119)</h3>
          <div class="talk">
            先程、お客様から■の修理依頼のお電話が入りまして、こちらの製品の場合、エディオン本部からの指示により、家電の119番様でのご対応をお願いしております。
          </div>
          <div class="copyable">
            <div>
              <span class="clock"></span> 架電 CC<span class="operator-name"
                >■</span
              >
            </div>
            <div>対応者: 家電119/■様/■</div>
            <div>
              ユナイト非対応の製品のため、家電119へ連携。ご対応をお願いし、了承をいただく。
            </div>
          </div>
        </div>

        <div
          class="search-item card"
          data-title="案内ステータス"
          data-category="inbound"
          data-created-at="2026-02-01"
        >
          <table class="copyable-table">
            <tr>
              <th></th>
              <th>未</th>
              <th>済</th>
            </tr>
            <tr>
              <th>有償警告案内</th>
              <td>有/未</td>
              <td>有/済</td>
            </tr>
            <tr>
              <th>メーカー保証期間内</th>
              <td>メ/未</td>
              <td>メ/済</td>
            </tr>
            <tr>
              <th>保証対象外部位</th>
              <td>外/未</td>
              <td>外/済</td>
            </tr>
          </table>
        </div>

        <div
          class="search-item card"
          data-title="CB: 修理依頼OK"
          data-category="cb"
          data-created-at="2026-02-01"
        >
          <div class="card-content">
            <div style="display: flex; gap: 4px; align-items: center">
              <span>案内: </span>
              <div class="radio-pills">
                <label>
                  <input
                    type="radio"
                    name="outbound-annai"
                    value="outbound-annai-yusho"
                    checked
                  />有償警告
                </label>
                <label>
                  <input
                    type="radio"
                    name="outbound-annai"
                    value="outbound-annai-maker"
                  />メーカー保証期間内
                </label>
                <label>
                  <input
                    type="radio"
                    name="outbound-annai"
                    value="outbound-annai-taishogai"
                  />保証対象外
                </label>
              </div>
            </div>

            <div style="display: flex; gap: 4px; align-items: center">
              <span>故障内容: </span>
              <div class="radio-pills">
                <label>
                  <input
                    type="radio"
                    name="outbound-koshonaiyo"
                    value="outbound-koshonaiyo-ok"
                    checked
                  />一致
                </label>
                <label>
                  <input
                    type="radio"
                    name="outbound-koshonaiyo"
                    value="outbound-koshonaiyo-add"
                  />追加
                </label>
                <label>
                  <input
                    type="radio"
                    name="outbound-koshonaiyo"
                    value="outbound-koshonaiyo-change"
                  />変更
                </label>
              </div>
            </div>
            <div class="copyable">
              <div>
                <span class="clock"></span> 架電 CC<span class="operator-name"
                  >■</span
                >
              </div>
              <div>対応者: ■</div>
              <div>・<span id="outbound-annai"></span></div>
              <div>・<span class="delay-notice"></span>済</div>
              <div id="outbound-koshonaiyo"></div>
            </div>
          </div>
        </div>

        <div
          class="search-item card"
          data-title="CB: 不出"
          data-category="cb"
          data-created-at="2026-02-01"
        >
          <!-- <div class="card-title">CB: 不出</div> -->
          <div class="card-content">
            <div
              style="
                display: flex;
                gap: 4px;
                align-items: center;
                margin-bottom: 8px;
              "
            >
              <select id="fude-kaisu-select">
                <option value="fude-kaisu-1">1回目</option>
                <option value="fude-kaisu-2">2回目</option>
                <option value="fude-kaisu-3">3回目</option>
              </select>
              <!-- <span>種類: </span> -->
              <select id="fude-type-select">
                <option value="rusuden-fukikomi">留守電吹き込み済み</option>
                <option value="rusuden">留守電</option>
                <option value="call">コール音</option>
                <option value="wachu">話中</option>
                <option value="chikakuni">
                  「近くにおりません」アナウンス
                </option>
              </select>
              <input
                type="text"
                id="fude-type-override"
                placeholder="自由に入力"
              />
            </div>

            <div class="copyable">
              <div>
                <span class="fude-kaisu"></span>
                <span class="clock"></span> 架電 CC<span class="operator-name"
                  >■</span
                >
              </div>
              <div class="fude-type"></div>
            </div>
          </div>
        </div>

        <div
          class="search-item card"
          data-title="CB: 販売店戻し"
          data-aliases="はんばいてんもどし"
          data-category="cb"
          data-created-at="2026-02-01"
        >
          <div class="card-content">
            <div class="copyable">
              <div>
                <span class="clock"></span> 架電 CC<span class="operator-name"
                  >■</span
                >
              </div>
              <div>対応者: ■</div>
              <div>
                お客様が当CCからの電話にお出にならず、修理の手配を進められない旨をお伝え。
                フリーダイヤルの電話に出ていただくか、お客様から当CCへ折り返しご連絡いただくようお伝えいただき、その結果を折り返していただくようお願いし、了承を得る。
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- この階層にデータを追加。 -->

      <!-- No results message (hidden by default) -->
      <div id="no-results" class="empty-state" style="display: none">
        <div>データがありません</div>
      </div>

      <!-- Empty state (shown when no logs exist) -->
      <div id="empty-state" class="empty-state" style="display: none">
        <div class="empty-state-icon">📝</div>
        <div>履歴がありません</div>
        <div class="empty-state-message">まだログが記録されていません</div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="./config.js"></script>
    <script src="../vendor/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="../lib/copy-handler/index.js"></script>
    <script src="../lib/clock/index.js"></script>
    <script src="../lib/search-filter/index.js"></script>
    <script src="../lib/form-updater/index.js"></script>
    <!-- <script src="../lib/tabs/index.js"></script> -->
    <script>
      let isAdmin = false;
      /**
       * data-title属性を持つ要素にcard-titleを自動生成
       */
      function initTitles() {
        document.querySelectorAll("[data-title]").forEach((element) => {
          const title = element.dataset.title;
          if (title) {
            const existingTitle = element.querySelector(".card-title");
            if (!existingTitle) {
              const cardTitle = document.createElement("div");
              cardTitle.className = "card-title";
              cardTitle.textContent = title;
              element.insertBefore(cardTitle, element.firstChild);
            }
          }
        });
      }

      /**
       * UI要素を初期化
       */
      function initUI() {
        initTitles();
        // 管理者用の表示
        const params = new URLSearchParams(location.search);
        isAdmin = params.has("admin");
        if (!isAdmin) {
          const elem = document.getElementById("help-link");
          elem.style.display = "none";
        }

        // オペレーター名
        const initialOperatorName = "■";
        document
          .getElementById("operator-name-input")
          .addEventListener("input", (event) => {
            let newValue = event.target.value.trim();
            if (newValue === "") {
              // #operator-name-inputが空の時は、#operator-name-inputのbackground-colorを赤にする
              // input.style.backgroundColor = "#ffcccc";
              newValue = initialOperatorName;
            } else {
              // input.style.backgroundColor = "";
            }
            document.querySelectorAll(".operator-name").forEach((el) => {
              el.textContent = newValue;
            });
          });
        dispatchEventBySelector("#operator-name-input", "input"); // 初期化

        // 日時フォーマット
        document.getElementById("datetime-format-input").value =
          CONFIG.datetimeFormat;
      }
      // UI初期化
      initUI();

      // Library初期化
      // CopyHandlerを初期化
      const copyHandler = new CopyHandler({
        copyIconColor: "var(--accent)", // コピーアイコンの色
        flashColor: "color-mix(in srgb, var(--accent) 30%, transparent)", // コピー成功時のハイライト色
        // showCopyIcon: false,  // コピーアイコンを非表示
        includeTh: false, // th要素をコピー対象外
      });
      copyHandler.init();

      // SearchFilterを初期化
      const searchFilter = new SearchFilter().init();

      /**
       * カテゴリフィルターボタンのイベントリスナーを設定
       */
      function initCategoryFilters() {
        document
          .querySelectorAll("[data-target-category]")
          .forEach((button) => {
            button.addEventListener("click", (e) => {
              const category = e.currentTarget.dataset.targetCategory;

              if (category === "all") {
                searchFilter.clearFilters();
              } else {
                searchFilter.setFilter("category", category);
              }

              document
                .querySelectorAll("[data-target-category]")
                .forEach((btn) => {
                  btn.classList.remove("active");
                });
              e.currentTarget.classList.add("active");
            });
          });

        // 初期状態で「受電」フィルターを適用
        const inboundButton = document.querySelector(
          '[data-target-category="inbound"]',
        );
        if (inboundButton) {
          inboundButton.classList.add("active");
          searchFilter.setFilter("category", "inbound");
        }
      }

      initCategoryFilters();

      // キーワードボタンのイベントリスナーを設定
      function initKeywordButtons() {
        document.querySelectorAll(".keyword-btn").forEach((button) => {
          button.addEventListener("click", (e) => {
            const keyword = e.target.dataset.keyword;
            const searchInput = document.getElementById("search-input");
            searchInput.value = keyword;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
            searchInput.focus();
          });
        });
      }

      initKeywordButtons();

      // Libs
      // 日時表示を初期化
      new Clock({
        format: CONFIG.datetimeFormat,
        // format: "YYYY/MM/DD HH:mm:ss"
      });
      // FormUpdaterを初期化
      const formUpdater = new FormUpdater();
      formUpdater.init();

      /**
       * 故障内容のラジオボタンの値からHTMLメッセージを取得
       * @param {string} key - ラジオボタンの値
       * @returns {string} HTMLメッセージ
       */
      function getOutboundKoshonaiyoHtml(key) {
        const messages = {
          "outbound-koshonaiyo-ok": "故障内容一致を確認。",
          "outbound-koshonaiyo-change": "故障内容変更:<br />■<br />↓<br />■",
          "outbound-koshonaiyo-add": "故障内容追記:",
        };
        return messages[key] || "";
      }

      document
        .querySelectorAll('input[name="outbound-koshonaiyo"]')
        .forEach((radio) => {
          radio.addEventListener("change", (event) => {
            const selectedValue = event.target.value;
            const html = getOutboundKoshonaiyoHtml(selectedValue);
            document.getElementById("outbound-koshonaiyo").innerHTML = html;
          });
        });

      function getOutboundAnnaiHtml(key) {
        console.log("key", key);
        const htmlMap = {
          "outbound-annai-yusho": `有償警告案内済`,
          "outbound-annai-maker": `メーカー保証期間内の有償警告案内済`,
          "outbound-annai-taishogai": `保証対象外部位案内済`,
        };
        return htmlMap[key] || null;
      }

      document
        .querySelectorAll('input[name="outbound-annai"]')
        .forEach((radio) => {
          radio.addEventListener("change", (event) => {
            const html = getOutboundAnnaiHtml(event.target.value);
            document.getElementById("outbound-annai").innerHTML = html;
          });
        });

      /**
       * セレクターで要素を取得してイベントをディスパッチ
       * @param {string} selector - CSSセレクター
       * @param {string} eventType - イベントタイプ
       * @returns {boolean} 要素が見つかってイベントをディスパッチできたらtrue
       */
      function dispatchEventBySelector(selector, eventType) {
        const element = document.querySelector(selector);
        if (!element) {
          console.warn(`Element not found: ${selector}`);
          return false;
        }
        element.dispatchEvent(new Event(eventType));
        return true;
      }

      document
        .getElementById("fude-kaisu-select")
        .addEventListener("change", (e) => {
          const select = e.target;
          const selectedOption = select.options[select.selectedIndex];
          document.querySelectorAll(".fude-kaisu").forEach((el) => {
            el.textContent = selectedOption.textContent;
          });
        });

      document
        .getElementById("fude-type-select")
        .addEventListener("change", (e) => {
          // fude-type-override が空の場合のみ反映
          const overrideInput = document.getElementById("fude-type-override");
          if (overrideInput.value.trim()) {
            return;
          }
          const select = e.target;
          const selectedOption = select.options[select.selectedIndex];
          document.querySelectorAll(".fude-type").forEach((el) => {
            el.textContent = selectedOption.textContent;
          });
        });

      document
        .getElementById("fude-type-override")
        .addEventListener("input", (e) => {
          const input = e.target;
          const value = input.value.trim();
          if (value) {
            document.querySelectorAll(".fude-type").forEach((el) => {
              el.textContent = value;
            });
          } else {
            // セレクトの値に戻す
            const select = document.getElementById("fude-type-select");
            const selectedOption = select.options[select.selectedIndex];
            document.querySelectorAll(".fude-type").forEach((el) => {
              el.textContent = selectedOption.textContent;
            });
          }
        });

      function updateDelayNoticeUI() {
        const text = CONFIG.ohinichiText || config.defaultOhinichiText;
        document
          .querySelectorAll(".delay-notice, .delay-notice-for-taishogai")
          .forEach((element) => {
            element.textContent = text;
          });
      }

      function updateIsMitsubishiUI() {
        const isMitsubishiLabel = document.getElementById(
          "is-mitsubishi-label",
        );

        if (CONFIG.ohinichiText) {
          isMitsubishiLabel.style.display = "none";
          return;
        } else {
          isMitsubishiLabel.style.display = "";
        }
      }

      function init() {
        // タブを初期化
        // const tabs = new Tabs({
        //   tabsList: "#main-tabs", // TabsList
        //   defaultValue: "inbound", // アクティブなタブのデフォルト値
        //   variant: "pills", // タブのスタイル: 'underline' または 'pills'
        //   activeBgColor: "var(--accent)", // アクティブなタブの背景色
        //   activeBorderColor: "var(--accent)", // アクティブなタブのborderの色
        //   // activeColor: "var(--accent)", // アクティブなタブのテキストの色
        //   // onValueChange: (value, previousValue) => {
        //   //   console.log(`Value changed: ${previousValue} → ${value}`);
        //   // },
        // });

        //
        updateDelayNoticeUI();
        updateIsMitsubishiUI();
        // 不出
        dispatchEventBySelector("#fude-kaisu-select", "change");
        dispatchEventBySelector("#fude-type-select", "change");

        //
        dispatchEventBySelector(
          'input[name="outbound-annai"]:checked',
          "change",
        );
        dispatchEventBySelector(
          'input[name="outbound-koshonaiyo"]:checked',
          "change",
        );
        document.getElementById("delay-notice-input").value =
          CONFIG.ohinichiText;
        // dispatchEventBySelector('input[id="delay-notice-input"]', "input");
      }
      init();
    </script>
  </body>
</html>
