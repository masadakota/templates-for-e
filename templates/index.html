<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>後処理テンプレ HTML版</title>
    <link rel="stylesheet" href="../vendor/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="../styles/globals.css" />
    <link rel="stylesheet" href="../styles/tailwind-like.css" />
    <link rel="stylesheet" href="../styles/bootstrap-custom.css" />
    <link rel="stylesheet" href="../styles/templates.css" />
    <link rel="stylesheet" href="../lib/copy-handler/styles.css" />
  </head>
  <body class="bg-foreground/30">
    <div class="container bg-muted">
      <h1 class="mt-0 mb-2" style="font-size: 1.2rem">後処理テンプレ</h1>

      <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="pills-home-tab"
            data-bs-toggle="pill"
            data-bs-target="#pills-home"
            type="button"
            role="tab"
            aria-controls="pills-home"
            aria-selected="true"
          >
            受電
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="pills-profile-tab"
            data-bs-toggle="pill"
            data-bs-target="#pills-profile"
            type="button"
            role="tab"
            aria-controls="pills-profile"
            aria-selected="false"
          >
            架電
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="pills-contact-tab"
            data-bs-toggle="pill"
            data-bs-target="#pills-contact"
            type="button"
            role="tab"
            aria-controls="pills-contact"
            aria-selected="false"
          >
            テスト
          </button>
        </li>
      </ul>
      <div class="tab-content" id="pills-tabContent">
        <div
          class="tab-pane fade show active"
          id="pills-home"
          role="tabpanel"
          aria-labelledby="pills-home-tab"
        >
          ...
        </div>
        <div
          class="tab-pane fade"
          id="pills-profile"
          role="tabpanel"
          aria-labelledby="pills-profile-tab"
        >
          ...
        </div>
        <div
          class="tab-pane fade"
          id="pills-contact"
          role="tabpanel"
          aria-labelledby="pills-contact-tab"
        >
          ...
        </div>
      </div>

      <div class="main-layout" style="display: flex; flex-direction: column">
        <div class="lg:flex-1">
          <div
            class="lg:flex-col"
            style="display: flex; gap: 4px; flex-wrap: nowrap"
          >
            <div style="max-width: 100%">
              <div
                id="results-for-rsystem-label"
                class="text-sm"
                style="display: none"
              >
                R-system
              </div>
              <div id="results" class="results copyable">
                <div class="datetime-name-container">
                  <span class="current-datetime"></span><span>CC</span
                  ><span class="name-display"></span>
                </div>
                <div>
                  <span class="status-urgent"></span>
                </div>
                <div id="phone-guidance-at-store" style="display: none">
                  お客様来店中のため、お電話を代わっていただき、案内。<br /><br />
                </div>
                <div id="dealer-cost-coverage" style="display: none"></div>
                <span class="status-name-prefix"></span
                ><span class="person-name"></span
                ><span class="status-name-suffix"></span>
                <div>
                  <span class="status-paid"></span
                  ><span class="status-display-paid status-display"></span
                  ><span class="dealer-informed-display"></span>
                </div>
                <span class="status-delay"></span
                ><span class="status-display-delay status-display"></span><br />
              </div>
            </div>

            <div
              id="teams-results-container"
              style="max-width: 100%; display: none"
            >
              <div class="text-sm">Teams</div>
              <div id="results-chat" class="results copyable">
                <div class="datetime-name-container">
                  <span class="current-datetime"></span><span>CC</span
                  ><span class="name-display"></span>
                </div>
                <div>
                  <span class="status-urgent"></span>
                </div>
                <div>
                  <span class="model-check-display"></span>
                </div>
                <span class="status-note"></span>
                <div>
                  <span class="status-paid"></span
                  ><span class="status-display-paid status-display"></span
                  ><span class="dealer-informed-display"></span>
                </div>
                <span class="status-delay"></span
                ><span class="status-display-delay status-display"></span><br />
              </div>
            </div>
          </div>
          <div
            id="copy-instruction"
            class="text-sm text-muted-foreground"
            style="position: relative; text-align: center; margin-bottom: 4px"
          >
            ↑右クリックでコピー
          </div>

          <div
            class="lg:hidden"
            style="
              border-bottom: 1px solid #ccc;
              margin-top: 12px;
              margin-left: -12px;
              margin-right: -12px;
            "
          ></div>
        </div>

        <div
          id="inspector"
          class="lg:h-full lg:!flex-initial"
          style="
            flex: 1;
            overflow-y: scroll;
            margin-right: -12px;
            max-width: 100%;
            width: 500px;
          "
        >
          <div
            style="
              position: relative;
              display: flex;
              flex-direction: column;
              gap: 0.3rem;
              border: 2px solid #888;
              border-radius: 8px;
              padding: 10px;
              padding-top: 40px;
              margin-top: 12px;
              margin-bottom: 12px;
            "
          >
            <div class="box-label" style="font-size: 0.9rem">
              ショートカットボタン
            </div>
            <div style="display: flex; gap: 4px; flex-wrap: wrap">
              <button
                id="shortcut-yu-mi"
                type="button"
                class="btn btn-outline-primary"
                style="
                  font-size: 0.85rem;
                  padding-left: 6px;
                  padding-right: 6px;
                "
                title="10年保証有償警告/未"
              >
                10年保証/未
              </button>
              <button
                id="shortcut-yu-sumi"
                type="button"
                class="btn btn-outline-primary"
                style="
                  font-size: 0.85rem;
                  padding-left: 6px;
                  padding-right: 6px;
                "
                title="10年保証有償警告/済"
              >
                10年保証/済
              </button>
              <button
                id="shortcut-me-mi"
                type="button"
                class="btn btn-outline-primary"
                style="
                  font-size: 0.85rem;
                  padding-left: 6px;
                  padding-right: 6px;
                "
                title="メーカー保証期間内/未"
              >
                メーカー保証/未
              </button>
              <button
                id="shortcut-me-sumi"
                type="button"
                class="btn btn-outline-primary"
                style="
                  font-size: 0.85rem;
                  padding-left: 6px;
                  padding-right: 6px;
                "
                title="メーカー保証期間内/済"
              >
                メーカー保証/済
              </button>
              <div style="white-space: nowrap">
                <button
                  id="shortcut-gai-mi"
                  type="button"
                  class="btn btn-outline-primary"
                  style="
                    font-size: 0.85rem;
                    padding-left: 8px;
                    padding-right: 8px;
                  "
                  title="保証対象外部位/未"
                >
                  保証対象外/未
                </button>
                <button
                  id="shortcut-gai-sumi"
                  type="button"
                  class="btn btn-outline-primary"
                  style="
                    font-size: 0.85rem;
                    padding-left: 8px;
                    padding-right: 8px;
                  "
                  title="保証対象外部位/済"
                >
                  保証対象外/済
                </button>
              </div>
            </div>
          </div>

          <div
            style="
              border: 2px solid #888;
              border-radius: 8px;
              padding: 12px;
              margin-bottom: 1rem;
              display: flex;
              flex-direction: column;
              gap: 0.5rem;
            "
          >
            <div
              style="
                position: relative;
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
              "
            >
              <div
                class="box-label"
                style="font-size: 0.9rem; margin-top: -12px; margin-left: -12px"
              >
                設定
              </div>
              <!-- <label style="white-space: nowrap">
              <input type="checkbox" id="detailed-view-checkbox" />
              詳細表示
            </label> -->
              <div
                style="
                  display: flex;
                  gap: 0.5rem;
                  align-items: center;
                  flex-wrap: wrap;
                "
              ></div>
              <button
                id="reset-btn"
                type="button"
                class="btn btn-outline-primary"
                style="
                  padding: 5px 10px;
                  cursor: pointer;
                  white-space: nowrap;
                  font-size: 0.9rem;
                "
              >
                リセット
              </button>
            </div>
            <div
              style="
                display: flex;
                gap: 0.5rem;
                align-items: center;
                border: 2px solid #ccc;
                border-radius: 8px;
                padding: 10px;
                width: fit-content;
                flex-wrap: wrap;
              "
            >
              <label style="white-space: nowrap">
                <input type="checkbox" id="show-datetime-name-checkbox" />
                表示
              </label>

              <button
                id="update-datetime-btn"
                type="button"
                class="btn btn-outline-primary"
                style="padding: 5px 10px; cursor: pointer; white-space: nowrap"
              >
                日時更新
              </button>

              <label style="font-size: 0.9rem">
                オペレーター名:
                <input
                  type="text"
                  id="name-input"
                  style="padding: 5px; width: 100px"
                />
              </label>
            </div>

            <div style="display: flex; gap: 1rem; flex-wrap: wrap">
              <label>
                <input
                  type="checkbox"
                  class="check-item"
                  data-target="status-urgent"
                />
                至急対応希望
              </label>
            </div>

            <div
              style="
                border: 2px solid #ccc;
                padding: 10px;
                border-radius: 8px;
                /* width: fit-content; */
                /* width: 100%; */
                display: flex;
                gap: 0.5rem;
                flex-direction: column;
              "
            >
              <div style="display: flex">
                <div style="flex: 1"></div>
                <label style="margin-right: 12px">
                  <input
                    type="checkbox"
                    id="status-checkbox"
                    class="status-checkbox"
                  />
                  済
                </label>
              </div>
              <div
                style="
                  border: 2px solid #ccc;
                  padding: 10px;
                  border-radius: 8px;
                  /* width: fit-content; */
                  display: flex;
                  gap: 0 0.5rem;
                "
              >
                <div
                  style="
                    display: flex;
                    flex-direction: column;
                    gap: 0.5rem;
                    flex-wrap: wrap;
                    flex: 1;
                  "
                >
                  <label>
                    <input
                      type="radio"
                      name="paid"
                      value="有償警告"
                      id="paid-base-radio"
                      class="paid-radio"
                      checked
                    />
                    有償警告
                  </label>

                  <label>
                    └<input type="checkbox" id="paid-maker-warranty-checkbox" />
                    メーカー保証期間内
                  </label>

                  <label>
                    <input
                      type="radio"
                      name="paid"
                      value="保証対象外部位有償案内"
                      id="paid-out-of-warranty-radio"
                      class="paid-radio"
                    />
                    保証対象外部位有償案内
                  </label>

                  <div class="separator-horizontal"></div>

                  <label>
                    <input type="checkbox" id="dealer-informed-checkbox" />
                    販売店にて案内済み
                  </label>
                  <label>
                    <input type="checkbox" id="dealer-cost-coverage-checkbox" />
                    販売店が費用を
                    <select id="dealer-cost-coverage-select">
                      <option value="full">全額</option>
                      <option value="partial">一部</option>
                    </select>
                    負担
                  </label>
                </div>
                <div class="separator-vertical"></div>
                <label style="vertical-align: middle">
                  <input type="checkbox" id="paid-status-checkbox" />
                  済
                </label>
              </div>

              <div
                style="
                  gap: 1rem;
                  /* flex-wrap: wrap; */
                  flex: 1;
                  border: 2px solid #ccc;
                  padding: 10px;
                  border-radius: 8px;
                  display: flex;
                  gap: 0 0.5rem;
                "
              >
                <div style="flex: 1">
                  <div>お日にちがかかる可能性</div>

                  <div style="display: flex; flex-wrap: wrap; gap: 1rem">
                    <label>
                      <input
                        type="checkbox"
                        id="mitsubishi-checkbox"
                        class="mitsubishi-checkbox"
                      />
                      三菱
                    </label>
                    <label>
                      <input
                        type="checkbox"
                        id="newyear-checkbox"
                        class="newyear-checkbox"
                      />
                      年末年始
                    </label>
                  </div>
                </div>
                <div class="separator-vertical"></div>
                <label>
                  <input type="checkbox" id="delay-status-checkbox" />
                  済
                </label>
              </div>

              <label>
                <input type="checkbox" id="phone-guidance-at-store-checkbox" />
                店舗にて電話を代わっていただき案内
              </label>
            </div>

            <div
              style="
                display: flex;
                gap: 1rem;
                align-items: center;
                flex-wrap: wrap;
                border: 2px solid #ccc;
                padding: 10px;
                border-radius: 8px;
                width: fit-content;
              "
            >
              <label>
                <input
                  type="checkbox"
                  class="check-item"
                  data-target="status-name"
                />
                名前の聴取
              </label>

              <label>
                <select id="person-select">
                  <option value="奥様">奥様</option>
                  <option value="ご主人様">ご主人様</option>
                  <option value="ご子息様">ご子息様</option>
                  <option value="ご息女様">ご息女様</option>
                  <option value="お母様">お母様</option>
                  <option value="お父様">お父様</option>
                  <option value="折り返し先の方">折り返し先の方</option>
                </select>
              </label>
            </div>

            <div class="border-2 border-border p-2 rounded-md">
              <div class="text-sm text-muted-foreground font-bold">Teams</div>
              <label>
                <input
                  type="checkbox"
                  class="check-item"
                  data-target="model-check"
                />
                型番確認
              </label>

              <label>
                <input
                  type="checkbox"
                  class="check-item"
                  data-target="status-note"
                />
                備考要確認
              </label>
            </div>

            <div style="height: 500px; background-color: #888">Test</div>
          </div>
        </div>

        <!-- <div style="display: flex; flex-direction: column; gap: 1rem">
          <iframe
            src="../components/outbound.html"
            scrolling="no"
            style="
              width: 100%;
              height: 200px;
              border: 2px solid #ccc;
              border-radius: 8px;
              overflow: hidden;
            "
          ></iframe>
          <iframe
            src="../components/inbound.html"
            scrolling="no"
            style="
              width: 100%;
              height: 200px;
              border: 2px solid #ccc;
              border-radius: 8px;
              overflow: hidden;
            "
          ></iframe>
        </div> -->
      </div>
    </div>

    <!-- Modal for status-note confirmation -->
    <div
      class="modal"
      id="statusNoteConfirmModal"
      tabindex="-1"
      aria-labelledby="statusNoteConfirmModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="statusNoteConfirmModalLabel">確認</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            Teams用テンプレの「備考要確認」を非表示にしますか？
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              id="statusNoteConfirmNo"
              data-bs-dismiss="modal"
            >
              いいえ
            </button>
            <button
              type="button"
              class="btn btn-primary"
              id="statusNoteConfirmYes"
            >
              はい
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Configuration -->
    <script src="../config/defaults.js"></script>

    <!-- Legacy scripts (will be gradually migrated) -->
    <script src="../scripts/templates.js"></script>
    <script src="../lib/copy-handler/config.js"></script>
    <script src="../lib/copy-handler/index.js"></script>

    <!-- New State Management (ES Module) -->
    <script type="module" src="../scripts/app.js"></script>
    <script src="../vendor/bootstrap/bootstrap.bundle.min.js"></script>
  </body>
</html>
